<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MY APP</title>
    <link class="jsbin" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>
<body>
<p>{{usuario}}</p>
<form action="http://localhost:8080/Miperfil" method="POST" id="formoculto">
    <input type="hidden" id="var1" name="userId" value="{{usuario}}"/>
    <input type="submit" value="IrPerfil">
</form>
{{#each posts}}
    <form action="javascript:;" onsubmit="favorito({{this.id}},{{usuario}});" >
        <input type="submit" value="like">
    <p>{{this.id}}</p>
    <p>{{this.Descripcion}}</p>
    <img src="http://localhost:8080/photo/{{this.id}}" alt="your image" />
{{/each}}
</body>
</html>
<script>
    function readURL(input) {
        console.log('elpapu')
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#blah')
                        .attr('src', e.target.result)
                        .width(150)
                        .height(200);
            };
            reader.readAsDataURL(input.files[0]);
        }
    }
    async function favorito(id,usuario){
        await fetch('http://localhost:8080/favorito', {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ "fotoo": id, "usuario": {{usuario}} })
        })
    }
    function eslikeado(){
        return true;
    }
</script>
